/* Kavishka Diving & Snorkeling Center - v2.0 Styles
   Edit variables below for quick brand tweaks:
*/

:root {
  --brand-primary: #0b5ed7;   /* Deep ocean blue */
  --brand-teal: #0dcaf0;      /* Turquoise */
  --brand-teal-dark: #0aa2c0; /* Teal accent */
  --brand-dark: #0a2540;      /* Dark text */
  --text-muted: #6c757d;
  --bg-soft: #f0fbff;         /* Soft ocean background */
  --radius: 0.75rem;
  --shadow: 0 8px 24px rgba(0,0,0,0.08);
  /* hero height defaults (override min-vh-100 rows inside hero banners) */
  --hero-height-desktop: 48vh;
  --hero-height-tablet: 44vh;
  --hero-height-mobile: 36vh;
  /* Increased large hero height for desktop as requested (big hero) */
  --hero-height-large-desktop: 85vh;
  --hero-height-large-tablet: 64vh;
  --hero-height-large-mobile: 56vh;
}

* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: #0a2540;
  line-height: 1.6;
  padding-top: 72px; /* space for fixed navbar */
}

h1, h2, h3, h4, h5, h6, .brand-text {
  font-family: Poppins, Inter, sans-serif;
}

/* Header */
.navbar {
  transition: background 0.2s ease, box-shadow 0.2s ease;
}
.navbar.scrolled {
  background: rgba(255,255,255,0.98) !important;
  box-shadow: var(--shadow);
}
.navbar .nav-link {
  font-weight: 600;
  color: #0a2540;
  margin: 0 0.25rem;
}
.navbar .nav-link:hover { color: var(--brand-primary); }
.navbar .nav-link.cta {
  color: #fff;
  background: var(--brand-primary);
  border-radius: 999px;
  padding: 0.5rem 1rem;
}
.navbar .nav-link.cta:hover {
  background: var(--brand-teal-dark);
}

/* Hero */
.hero-banner {
  position: relative;
  background-size: cover;
  background-position: center;
}

/* Rotating hero slides styling */
.hero-slides { position: absolute; inset: 0; overflow: hidden; z-index: 1; }
.hero-slide { position: absolute; inset: 0; background-size: cover; background-position: center; background-repeat: no-repeat; opacity: 0; transform: scale(1) translateY(0); will-change: opacity, transform; animation: heroCycle 30s linear infinite; }
.hero-slide:nth-child(1) { animation-delay: 0s; }
.hero-slide:nth-child(2) { animation-delay: -10s; }
.hero-slide:nth-child(3) { animation-delay: -20s; }

/* Ensure overlay and content sit above slides */
.hero-overlay { z-index: 2; }
.hero-content { position: relative; z-index: 3; }

@keyframes heroCycle {
  /* 30s total: each slide zooms for 10s (33.33%) then fades smoothly to the next */
  0% { opacity: 1; transform: scale(1) translateY(0); }
  33.333% { opacity: 1; transform: scale(1.06) translateY(-8px); }
  40% { opacity: 0; transform: scale(1.1) translateY(-20px); }
  100% { opacity: 0; transform: scale(1.1) translateY(-20px); }
}

/* Smooth easing for transforms and opacity */
.hero-slide { transition: opacity 0.9s cubic-bezier(.22,.9,.28,1), transform 10s ease-in-out; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .hero-slide { animation: none !important; opacity: 1 !important; transform: none !important; }
  .hero-slides .hero-slide:not(:first-child) { display: none !important; }
}

/* Override for pages using .min-vh-100 inside hero banners (reduces overly tall heroes) */
.hero-banner .min-vh-100 {
  min-height: var(--hero-height-desktop) !important;
}

@media (max-width: 1199.98px) {
  .hero-banner .min-vh-100 { min-height: var(--hero-height-tablet) !important; }
}
@media (max-width: 767.98px) {
  .hero-banner .min-vh-100 { min-height: var(--hero-height-mobile) !important; }
  .hero-banner { background-position: center top; }
}

/* Large hero only when .hero--large is present (index page) */
.hero--large .min-vh-100 { min-height: var(--hero-height-large-desktop) !important; }
@media (max-width: 1199.98px) {
  .hero--large .min-vh-100 { min-height: var(--hero-height-large-tablet) !important; }
}
@media (max-width: 767.98px) {
  .hero--large .min-vh-100 { min-height: var(--hero-height-large-mobile) !important; }
}

/* Tighter guest reviews hero: reduce vertical space for the review area */
.guest-reviews-overlay { padding: 48px 0; }
.guest-reviews-hero .display-5 { font-size: 1.8rem; }
.review-panel { padding: 18px; max-width: 820px; }
.review-panel .avatar { width:64px; height:64px; margin-top: -36px; }
.reviews-slider .review-card { padding: 0.9rem; }
.hero-overlay {
  position: absolute; inset: 0;
  background: linear-gradient(180deg, rgba(10,37,64,0.55), rgba(10,37,64,0.35));
}
.hero-content { position: relative; z-index: 2; }

/* Buttons */
.btn-primary {
  background: var(--brand-primary);
  border: 0;
}
.btn-primary:hover { background: #0a4ec4; }
.btn-outline-primary {
  color: var(--brand-primary);
  border-color: var(--brand-primary);
}
.btn-outline-primary:hover {
  color: #fff;
  background: var(--brand-primary);
}

/* Sections */
.bg-soft { background: var(--bg-soft); }

/* Cards */
.card { transition: transform 0.15s ease, box-shadow 0.15s ease; }
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
.package-card .card-img-top { height: 200px; object-fit: cover; }

/* Social icons */
.social-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px; height: 40px;
  border-radius: 50%;
  background: #f1f5f9;
  color: var(--brand-primary);
  text-decoration: none;
  transition: background 0.2s ease, color 0.2s ease;
}
.social-icon:hover { background: var(--brand-primary); color: #fff; }

/* CTA banner background (replace image URL) */
.cta-banner {
  background-image: url('https://images.unsplash.com/photo-1500375592092-40eb2168fd21?q=80&w=1600&auto=format&fit=crop');
  background-size: cover; background-position: center;
  position: relative; overflow: hidden;
}
.cta-banner::after {
  content: ""; position: absolute; inset: 0; background: rgba(10,37,64,0.45);
  z-index: 1;
}
.cta-banner > * { position: relative; z-index: 2; }
.cta-banner:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 12px 32px rgba(0,0,0,0.15);
}

/* Gallery grid hover effect */
.gallery-grid .gallery-item {
  display: block; position: relative; overflow: hidden; border-radius: 0.5rem;
}
.gallery-grid img { transition: transform 0.3s ease; }
.gallery-grid .gallery-item:hover img { transform: scale(1.06); }

/* Lightbox */
.lightbox {
  position: fixed; inset: 0; background: rgba(0,0,0,0.9);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  z-index: 1055; padding: 2rem;
}
.lightbox-img {
  max-width: 92vw; max-height: 72vh; border-radius: 0.5rem; box-shadow: var(--shadow);
}
.lightbox-caption { color: #e2e8f0; margin-top: 1rem; text-align: center; max-width: 90vw; }
.lightbox-close {
  position: absolute; top: 1rem; right: 1rem;
  background: rgba(255,255,255,0.1); border: 0; color: #fff;
  font-size: 2rem; width: 44px; height: 44px; border-radius: 50%;
}
.lightbox-close:hover { background: rgba(255,255,255,0.2); }

/* Animations */
.reveal { opacity: 0; transform: translateY(16px); }
.reveal.visible { opacity: 1; transform: none; transition: opacity 0.6s ease, transform 0.6s ease; }

/* Forms */
.form-control:focus, .form-select:focus {
  border-color: var(--brand-teal);
  box-shadow: 0 0 0 0.2rem rgba(13, 202, 240, 0.15);
}
.was-validated .form-control:invalid, .form-control.is-invalid {
  border-color: #dc3545;
}
.was-validated .form-control:valid, .form-control.is-valid {
  border-color: #198754;
}

/* Footer */
footer a { color: var(--brand-dark); text-decoration: none; }
footer a:hover { color: var(--brand-primary); }

/* Utilities */
.text-primary { color: var(--brand-primary) !important; }
.bg-primary { background: var(--brand-primary) !important; }

/* Responsive tweaks */
@media (max-width: 767.98px) {
  .display-4 { font-size: 2rem; }
  .display-5 { font-size: 1.75rem; }
}

/* ==========================
   Animations & Interactive UI
   ========================== */

/* Preloader overlay */
.preloader {
  position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg, #042433, #063c4a);
  color: #fff; z-index: 2000; transition: opacity 0.45s ease;
}
.preloader.hidden { opacity: 0; pointer-events: none; }
.preloader .loader { display:flex; flex-direction:column; align-items:center; gap:12px; }
.droplet { width:56px; height:56px; background: radial-gradient(circle at 35% 30%, #7ee7ff 0%, #06b6d4 35%, #036b70 100%); border-radius:50% 50% 50% 50%; transform-origin:center bottom; animation: droplet 1.6s ease-in-out infinite; box-shadow: 0 8px 24px rgba(3,43,66,0.25); }
@keyframes droplet { 0%{ transform: translateY(0) scaleY(0.95);} 50%{ transform: translateY(-8px) scaleY(1.05);} 100%{ transform: translateY(0) scaleY(0.95);} }

/* Hero parallax container - we'll move hero-inner for parallax */
.hero-banner { overflow: hidden; }
.hero-inner { transform: translateZ(0); transition: transform 0.15s linear; }

/* Waves overlay using pseudo-element */
.hero-waves { position: absolute; left:0; right:0; bottom:0; height:140px; pointer-events:none; z-index:1; }
.hero-waves svg { width:100%; height:100%; display:block; }

/* Floating subtle motion */
.floaty { animation: floaty 6s ease-in-out infinite; }
@keyframes floaty { 0%{ transform: translateY(0); }50%{ transform: translateY(-8px);}100%{ transform: translateY(0);} }

/* Hero text stagger helpers */
.hero-animated .stagger { opacity:0; transform: translateY(12px); transition: opacity 0.6s ease, transform 0.6s ease; }
.hero-animated .stagger.visible { opacity:1; transform:none; }

/* CTA ripple */
.btn.ripple { position: relative; overflow: hidden; }
.btn.ripple .ripple-el { position:absolute; border-radius:50%; background: rgba(255,255,255,0.35); transform: scale(0); opacity:0.9; pointer-events:none; }

/* Scroll indicator */
.scroll-indicator { position: absolute; left:50%; transform:translateX(-50%); bottom:20px; z-index:10; }
.scroll-indicator .arrow { display:block; width:28px; height:28px; border-bottom:2px solid rgba(255,255,255,0.9); border-right:2px solid rgba(255,255,255,0.9); transform: rotate(45deg); animation: bounce 1.6s infinite; }
@keyframes bounce { 0%{ transform: translateY(0) rotate(45deg); }50%{ transform: translateY(10px) rotate(45deg);}100%{ transform: translateY(0) rotate(45deg);} }

/* Reveal/slide variants */
.slide-up { opacity:0; transform: translateY(18px); transition: opacity 0.6s ease, transform 0.6s ease; }
.slide-up.visible { opacity:1; transform:none; }
.fade-in { opacity:0; transition: opacity 0.6s ease; }
.fade-in.visible { opacity:1; }

/* Stagger helper for grid children */
.stagger-grid > * { opacity:0; transform: translateY(10px); }
.stagger-grid .visible { opacity:1; transform:none; transition: opacity 0.5s ease, transform 0.5s ease; }

/* Card lift and hover shadow */
.card.hover-lift { transition: transform 0.25s ease, box-shadow 0.25s ease; }
.card.hover-lift:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(3,43,66,0.12); }

/* Button modern hover */
.btn-modern { transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.2s ease; }
.btn-modern:hover { transform: translateY(-3px) scale(1.02); box-shadow: 0 10px 20px rgba(3,43,66,0.12); }

/* Gallery hover zoom with overlay */
.gallery-grid .gallery-item { position:relative; overflow:hidden; }
.gallery-grid .gallery-item img { transition: transform 0.45s cubic-bezier(.2,.9,.2,1); }
.gallery-grid .gallery-item:hover img { transform: scale(1.08); }
.gallery-grid .gallery-item .overlay { position:absolute; inset:0; display:flex; align-items:flex-end; padding:0.75rem; background: linear-gradient(180deg, rgba(0,0,0,0) 40%, rgba(0,0,0,0.45) 100%); color:#fff; opacity:0; transition: opacity 0.28s ease; }
.gallery-grid .gallery-item:hover .overlay { opacity:1; }

/* Nav active transition */
.navbar .nav-link { position: relative; }
.navbar .nav-link::after { content:''; position:absolute; left:50%; transform:translateX(-50%); bottom:-8px; width:0; height:3px; background:var(--brand-primary); transition: width 0.28s ease; }
.navbar .nav-link:hover::after, .navbar .nav-link.active::after { width:40%; }

/* Social bounce */
.social-icon { transition: transform 0.18s ease; }
.social-icon:hover { transform: translateY(-6px) rotate(-6deg); }

/* Testimonial carousel fade (works with bootstrap's .carousel-fade) */
.carousel-fade .carousel-item { transition: opacity .75s ease; }
.carousel-fade .carousel-item { opacity: 0; }
.carousel-fade .carousel-item.active { opacity: 1; }

/* Scroll progress bar */
.scroll-progress { position: fixed; top:0; left:0; height:3px; background: linear-gradient(90deg,var(--brand-teal),var(--brand-primary)); width:0; z-index: 3000; transition: width 0.12s linear; }

/* Scroll-to-top button */
.to-top { position: fixed; right: 18px; bottom: 18px; width:48px; height:48px; border-radius:50%; background: var(--brand-primary); color:#fff; display:flex; align-items:center; justify-content:center; box-shadow: 0 10px 24px rgba(3,43,66,0.12); opacity:0; pointer-events:none; transition: opacity 0.24s ease; z-index: 2000; }
.to-top.visible { opacity:1; pointer-events:auto; }

/* FAQ accordion smooth */
.faq .answer { overflow: hidden; height: 0; transition: height 0.32s ease; }
.faq .answer.open { height: auto; }

/* Contact form floating labels (simple) */
.form-group { position: relative; }
.form-group label { position: absolute; left:12px; top:12px; transition: transform 0.18s ease, font-size 0.18s ease, opacity 0.18s ease; pointer-events: none; color: #6c757d; }
.form-group input:focus + label, .form-group textarea:focus + label, .form-group input.has-value + label, .form-group textarea.has-value + label { transform: translateY(-18px) scale(0.92); font-size:0.85rem; opacity:0.95; }

/* ==========================
   Testimonials / Reviews
   ========================== */
.reviews-wrap { padding: 0.5rem; }
.review-card { background: #fff; border-left: 6px solid var(--brand-teal-dark); padding: 1.1rem; border-radius: 12px; box-shadow: 0 10px 30px rgba(3,43,66,0.06); margin-bottom: 0.75rem; transition: transform 0.28s ease, box-shadow 0.28s ease; }
.review-card:hover { transform: translateY(-6px); box-shadow: 0 18px 36px rgba(3,43,66,0.10); }
.review-card .avatar { flex-shrink:0; object-fit:cover; }
.rating { color: #f6c74c; font-weight:700; letter-spacing:0.02em }
.text-teal { color: var(--brand-teal-dark) !important; }
.badge.border { border-width:1px; }

.reviews-slider { position: relative; min-height: 150px; }
.reviews-slider .review-card { position: absolute; left: 0; right: 0; top: 0; opacity: 0; transform: translateY(8px); transition: opacity 0.6s ease, transform 0.6s ease; }
.reviews-slider .review-card.active { opacity: 1; transform: translateY(0); position: relative; }

.reviews-controls .btn { border-radius: 999px; padding: 0.45rem 0.65rem; transition: transform 0.15s ease, background 0.15s ease; }
.reviews-controls .btn:hover { transform: scale(1.06); background: var(--brand-teal); color: #fff; border-color: var(--brand-teal); }
.dots { display:flex; align-items:center; }
.dots button { width:10px; height:10px; border-radius:50%; background: #d6eaf0; border: none; padding:0; transition: transform 0.12s ease, background 0.12s ease; }
.dots button.active { background: var(--brand-teal-dark); transform: scale(1.25); box-shadow: 0 6px 14px rgba(10,162,192,0.18); }

.review-summary { display:flex; gap:1rem; align-items:center; }
.btn-teal { background: var(--brand-teal-dark); color: #fff; border: 0; }
.btn-teal:hover { background: var(--brand-primary); }

/* Responsive adjustments */
@media (max-width: 767.98px) {
  /* On small screens show only the active review to avoid stacking and large empty space.
     Previous behavior set all review cards to position:relative which left non-active
     cards in the flow. We hide non-active cards and let the active card display:block. */
  .reviews-slider { min-height: auto; }
  .reviews-slider .review-card { position: relative; display: none; }
  .reviews-slider .review-card.active { display: block; }
  .reviews-controls { gap: 0.5rem; }
  .review-summary { flex-direction: column; align-items: stretch; text-align: center; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .reviews-slider .review-card, .review-card, .reviews-controls .btn, .dots button { transition: none !important; animation: none !important; }
}

/* ==========================
   Rotating Image Gallery
   ========================== */
.gallery-bg { background: linear-gradient(180deg, rgba(6,60,74,0.06), rgba(6,60,74,0.02)); }
.gallery-wrap { max-width: 1300px; margin: 0 auto; }
.gallery-viewport { width: 100%; }
.gallery-track { 
  transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1); 
  will-change: transform;
}
.gallery-slide { flex: 0 0 auto; width: 100%; }
.gallery-card { overflow: hidden; border-radius: 16px; border: 0; }
.gallery-img { 
  width: 100%; 
  height: 320px; 
  object-fit: cover; 
  display:block; 
  transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), filter 0.4s ease, opacity 0.3s ease;
  animation: subtleZoom 8s ease-in-out infinite;
}
.gallery-card:hover .gallery-img { 
  transform: scale(1.08); 
  filter: brightness(1.05);
}

@keyframes subtleZoom {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

.gallery-slide {
  animation: fadeSlideIn 0.6s ease-out;
}

@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}
.gallery-caption { background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.06)); color: var(--brand-dark); }

.gallery-nav { 
  position: absolute; 
  top: 50%; 
  transform: translateY(-50%); 
  z-index: 30; 
  width:44px; 
  height:44px; 
  border-radius:50%; 
  border:0; 
  background: rgba(255,255,255,0.9); 
  color: var(--brand-dark); 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  box-shadow: 0 8px 20px rgba(3,43,66,0.12); 
  cursor:pointer; 
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 0.9;
}
.gallery-nav:hover { 
  transform: translateY(-50%) scale(1.12); 
  background: var(--brand-teal-dark); 
  color: #fff; 
  opacity: 1;
  box-shadow: 0 12px 28px rgba(3,43,66,0.18);
}
.gallery-nav.prev { left: 12px; }
.gallery-nav.next { right: 12px; }

.gallery-dots button { width:10px; height:10px; border-radius:50%; border: none; background: #dfeff4; margin: 0 6px; transition: transform 0.12s ease, background 0.12s ease; }
.gallery-dots button.active { background: var(--brand-teal-dark); transform: scale(1.2); box-shadow: 0 8px 18px rgba(10,162,192,0.14); }

/* Responsive slides per view implementation: we'll compute widths in JS, but provide sensible heights */
@media (min-width: 1200px) {
  .gallery-slide { width: 25%; } /* 4 columns */
  .gallery-img { height: 280px; }
}
@media (min-width: 768px) and (max-width:1199px) {
  .gallery-slide { width: 50%; } /* 2 columns */
  .gallery-img { height: 320px; }
}
@media (max-width: 767px) {
  .gallery-slide { width: 100%; } /* 1 column */
  .gallery-img { height: 260px; }
  .gallery-nav { width:40px; height:40px; }
}

/* Lazy-loading placeholder shimmer */
.gallery-img[loading="lazy"] { background: linear-gradient(90deg, #f3f7f9 0%, #eef6fb 50%, #f3f7f9 100%); background-size: 200% 100%; animation: shimmer 1.6s linear infinite; }
@keyframes shimmer { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }

@media (prefers-reduced-motion: reduce) {
  .gallery-track, .gallery-img { transition: none !important; animation: none !important; }
}

/* Guest reviews hero background and panel */
.guest-reviews-hero { position: relative; background-image: url('https://images.unsplash.com/photo-1509228627153-7a97f9f0b53b'); background-size: cover; background-position: center; color: #fff; }
.guest-reviews-overlay { position: relative; background: linear-gradient(180deg, rgba(3,43,66,0.55), rgba(3,43,66,0.48)); padding: 80px 0; }
.guest-reviews-hero .display-5 { color: #fff; }
.review-panel { background: rgba(255,255,255,0.08); backdrop-filter: blur(6px); border-radius: 12px; padding: 28px; box-shadow: 0 18px 40px rgba(3,43,66,0.28); }
.review-panel .review-card { background: rgba(255,255,255,0.92); border-left: 6px solid var(--brand-teal-dark); padding: 18px; border-radius: 10px; box-shadow: 0 10px 30px rgba(3,43,66,0.06); margin-bottom: 0; }
.review-panel .avatar { width:72px; height:72px; box-shadow: 0 6px 18px rgba(3,43,66,0.12); border: 4px solid #fff; margin-top: -46px; }
.review-panel .rating { color: #07c0b8; font-weight:700; }
.verified-badge { color: rgba(0,0,0,0.6); }
/* TripAdvisor badge removed - kept verified-badge styling only */
.guest-reviews-hero .reviews-controls .btn { background: rgba(255,255,255,0.12); border: 1px solid rgba(255,255,255,0.18); color: #fff; }
.guest-reviews-hero .dots button { background: rgba(255,255,255,0.2); }
.guest-reviews-hero .dots button.active { background: var(--brand-teal); }

@media (max-width: 767.98px) {
  .review-panel { padding: 20px; }
  .review-panel .avatar { margin-top: -36px; }
}

/* Compact / two-column layout for reviews on small screens */
@media (max-width: 600px) {
  .guest-reviews-overlay { padding: 36px 0; }
  .guest-reviews-hero .display-5 { font-size: 1.6rem; }
  .review-panel { padding: 12px; max-width: 100%; }
  /* Keep review cards hidden on very small screens unless active. Style the active card.
     This prevents multiple card stacking and large empty space in mobile view. */
  .reviews-slider .review-card { display: none; }
  .reviews-slider .review-card.active {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    padding: 10px;
    background: rgba(255,255,255,0.96);
    border-left-width: 4px;
    border-radius: 10px;
  }
  .reviews-slider .review-card .avatar {
    width: 56px; height: 56px; margin-top: 0; border: 3px solid #fff; flex-shrink: 0;
  }
  .reviews-slider .review-card .rating { font-size: 0.9rem; }
  .reviews-slider .review-card p { margin-bottom: 6px; font-size: 0.95rem; }
  .reviews-controls { margin-top: 8px; }
  .guest-reviews-hero .dots { margin: 8px 0; }
}

/* Team photos: ensure same size round avatars with consistent framing */
#team .team-photo { display:flex; justify-content:center; }
#team .team-avatar {
  width: 140px;
  height: 140px;
  object-fit: cover;
  border-radius: 50%;
  border: 4px solid #fff;
  box-shadow: 0 8px 20px rgba(2,18,22,0.18);
  display: inline-block;
}

@media (max-width: 767.98px) {
  #team .team-avatar { width: 112px; height: 112px; }
}

@media (max-width: 479.98px) {
  #team .team-avatar { width: 96px; height: 96px; }
}

/* ==========================
   Gallery Page Styles
   ========================== */
.page-header.bg-light { background: linear-gradient(180deg,#f8fbfd,#f3f7fa); }
.page-header .breadcrumb { --bs-breadcrumb-divider: 'â€º'; }

.masonry-grid { display: grid; grid-template-columns: repeat(12, 1fr); grid-auto-rows: 8px; gap: 18px; }
.masonry-item { position: relative; grid-column-end: span 3; overflow: hidden; border-radius: 14px; box-shadow: 0 8px 25px rgba(0,0,0,0.12); background:#fff; }
.masonry-item img { width:100%; height:100%; object-fit:cover; display:block; transition: transform 0.45s cubic-bezier(.2,.9,.2,1), filter 0.3s ease; }
.masonry-item:hover img { transform: scale(1.06); }
.masonry-item figcaption { position: absolute; left:0; right:0; bottom:0; padding:12px 14px; color:#fff; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(3,43,66,0.6) 100%); display:flex; justify-content:space-between; align-items:center; gap:8px; }
.masonry-item .caption-text { display:block; font-size:0.9rem; color: #e6f7fb; }

/* Size helpers - these will be adjusted by JS on mobile but provide defaults */
.masonry-item[data-size="small"] { grid-column: span 3; grid-row: span 18; }
.masonry-item[data-size="medium"] { grid-column: span 6; grid-row: span 36; }
.masonry-item[data-size="large"] { grid-column: span 9; grid-row: span 54; }

/* Filters */
#galleryFilters .btn { border-radius: 999px; padding: 0.5rem 0.85rem; font-weight:600; }
#galleryFilters .btn.active { background: var(--brand-teal-dark); color: #fff; border-color: var(--brand-teal-dark); }

/* Lightbox overrides (ensure dominant on the gallery page) */
.lightbox { display:flex; align-items:center; justify-content:center; padding:2rem; }
.lightbox-inner { max-width: 92vw; max-height: 84vh; background: #fff; padding: 1rem; border-radius:12px; box-shadow: 0 30px 60px rgba(2,18,22,0.6); display:flex; flex-direction:column; gap:12px; align-items:center; }
.lightbox-img { max-width:100%; max-height:62vh; border-radius:8px; }
.lightbox-caption { margin:0; color:var(--brand-dark); }
.lightbox-counter { font-size:0.9rem; color:var(--text-muted); }
.lightbox-prev, .lightbox-next { position: absolute; top:50%; transform: translateY(-50%); background: rgba(0,0,0,0.6); color:#fff; border:0; width:48px; height:48px; border-radius:50%; display:flex; align-items:center; justify-content:center; z-index:2000; }
.lightbox-prev { left: 20px; }
.lightbox-next { right: 20px; }
.lightbox-close { position:absolute; top:16px; right:18px; background: rgba(255,255,255,0.96); border:0; width:40px; height:40px; border-radius:50%; font-size:1.2rem; }

/* Responsive columns: adjust grid spans per screen */
@media (max-width:1199px) {
  .masonry-grid { grid-template-columns: repeat(8, 1fr); }
  .masonry-item[data-size="small"] { grid-column: span 4; }
  .masonry-item[data-size="medium"] { grid-column: span 8; }
  .masonry-item[data-size="large"] { grid-column: span 8; }
}

/* Uniform square grid variant (requested: 3 / 2 / 1 columns with fixed square sizes) */
.masonry-grid.uniform-grid {
  display: grid;
  grid-template-columns: repeat(3, 350px);
  gap: 20px;
  justify-content: center;
  max-width: 1400px;
  margin: 0 auto;
}
.masonry-grid.uniform-grid .masonry-item {
  grid-column: auto !important;
  grid-row: auto !important;
  width: 350px;
  overflow: hidden; border-radius: 12px;
}
.masonry-grid.uniform-grid .masonry-item img {
  width: 100%;
  height: 100%;
  aspect-ratio: 1 / 1;
  object-fit: cover;
  display: block;
  transition: transform 0.35s ease, filter 0.25s ease;
}

@media (max-width: 991.98px) {
  .masonry-grid.uniform-grid { grid-template-columns: repeat(2, 300px); }
  .masonry-grid.uniform-grid .masonry-item { width: 300px; }
}

@media (max-width: 599.98px) {
  .masonry-grid.uniform-grid { grid-template-columns: 1fr; padding: 0 16px; }
  .masonry-grid.uniform-grid .masonry-item { width: 100%; }
  .masonry-grid.uniform-grid .masonry-item img { aspect-ratio: 1 / 1; width: 100%; }
}

/* Mobile-friendly adjustments */
@media (max-width: 767.98px) {
  body { padding-top: 64px; }
  .navbar .brand-text { font-size: 0.95rem; }
  .navbar .navbar-brand img { width: 28px; height: 28px; }
  .navbar-toggler { width: 48px; height: 48px; }
  .navbar .nav-link { padding: 0.5rem 0.5rem; font-size: 1rem; }
  .hero-banner { min-height: 44vh; padding-top: 36px; padding-bottom: 36px; }
  .hero-banner .display-5 { font-size: 1.6rem; }
  .masonry-grid.uniform-grid { gap: 20px; padding-left: 12px; padding-right: 12px; }
  .btn.btn-primary.btn-lg { width: 100%; padding: 0.85rem 1rem; font-size: 1.02rem; }
  .gallery-item { touch-action: manipulation; }
  .lightbox-inner { padding: 0.6rem; }
  .lightbox-prev, .lightbox-next { width: 44px; height: 44px; }
  footer { padding: 2rem 0; }
}

/* Improve tap targets for buttons on small screens */
@media (max-width: 480px) {
  .btn, .navbar-toggler { min-height: 44px; }
}

/* Ensure images generally scale down on mobile */
img { max-width: 100%; height: auto; }
@media (max-width:767px) {
  .masonry-grid { grid-template-columns: repeat(4, 1fr); }
  .masonry-item { grid-column: span 4 !important; }
  .masonry-item img { height: 220px; }
}

/* Hidden state for filter transitions */
.masonry-item.hidden { opacity: 0; transform: scale(0.98) translateY(8px); pointer-events:none; transition: opacity 0.36s ease, transform 0.36s ease; }

/* Lazy load blur effect */
.masonry-item img[loading="lazy"] { filter: blur(6px) grayscale(10%); transition: filter 0.4s ease, transform 0.4s ease; }
.masonry-item img.loaded { filter: none; }
